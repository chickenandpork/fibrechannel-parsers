AT_INIT()


AT_SETUP(Brocade alishow Parser)
dnl      ----------------------

AT_CHECK([java -Ddebug.verboseTokenizer=AliShowZoneParser -cp $abs_top_builddir/java/fcparsers.jar org.smallfoot.parser.zone.AliShowZoneParser < abs_top_srcdir/samples/simple.zoneshow ], 0, [stdout], [stderr])
AT_CHECK([java -Ddebug.dumpAliases=AliShowZoneParser      -cp $abs_top_builddir/java/fcparsers.jar org.smallfoot.parser.zone.AliShowZoneParser < abs_top_srcdir/samples/simple.zoneshow ], 0, [Parse results for AliShowZoneParser:
Zones: 4
Aliases: 11 (names with one or more WWPNs)
Aliases: 16 (name/WWPN pairs)
Alias: 50:06:0e:80:12:34:57:24, HDS0123457_CL3E
Alias: 50:06:0e:80:12:34:57:25, HDS0123457_CL3F
Alias: 50:06:0e:80:12:34:57:44, HDS0123457_CL5E
Alias: 50:06:0e:80:12:34:57:45, HDS0123457_CL5F
Alias: 50:06:0e:80:12:34:57:64, HDS0123457_CL7E
Alias: 50:06:0e:80:12:34:57:65, HDS0123457_CL7F
Alias: 10:00:00:00:c9:12:34:66, Oracle_123466
Alias: 10:00:00:00:c9:12:34:67, Oracle_123467
Alias: 10:00:00:00:c9:12:34:68, NASHead_123468
Alias: 10:00:00:00:c9:12:34:69, NASHead_123469
Alias: 10:00:00:00:c9:44:44:10, NASMany_654321
Alias: 10:00:00:00:c9:44:44:11, NASMany_654321
Alias: 10:00:00:00:c9:44:44:20, NASMany_654321
Alias: 10:00:00:00:c9:44:44:21, NASMany_654321
Alias: 10:00:00:00:c9:44:44:30, NASMany_654321
Alias: 10:00:00:00:c9:44:44:31, NASMany_654321
], [stderr])

AT_CHECK([java -Ddebug.verboseTokenizer=AliShowZoneParser -cp $abs_top_builddir/java/fcparsers.jar org.smallfoot.parser.zone.AliShowZoneParser < abs_top_srcdir/samples/simple-multicfg.zoneshow ], 0, [stdout], [stderr])
AT_CHECK([java -Ddebug.dumpAliases=AliShowZoneParser      -cp $abs_top_builddir/java/fcparsers.jar org.smallfoot.parser.zone.AliShowZoneParser < abs_top_srcdir/samples/simple-multicfg.zoneshow ], 0, [Parse results for AliShowZoneParser:
Zones: 4
Aliases: 11 (names with one or more WWPNs)
Aliases: 16 (name/WWPN pairs)
Alias: 50:06:0e:80:12:34:57:24, HDS0123457_CL3E
Alias: 50:06:0e:80:12:34:57:25, HDS0123457_CL3F
Alias: 50:06:0e:80:12:34:57:44, HDS0123457_CL5E
Alias: 50:06:0e:80:12:34:57:45, HDS0123457_CL5F
Alias: 50:06:0e:80:12:34:57:64, HDS0123457_CL7E
Alias: 50:06:0e:80:12:34:57:65, HDS0123457_CL7F
Alias: 10:00:00:00:c9:12:34:66, Oracle_123466
Alias: 10:00:00:00:c9:12:34:67, Oracle_123467
Alias: 10:00:00:00:c9:12:34:68, NASHead_123468
Alias: 10:00:00:00:c9:12:34:69, NASHead_123469
Alias: 10:00:00:00:c9:44:44:10, NASMany_654321
Alias: 10:00:00:00:c9:44:44:11, NASMany_654321
Alias: 10:00:00:00:c9:44:44:20, NASMany_654321
Alias: 10:00:00:00:c9:44:44:21, NASMany_654321
Alias: 10:00:00:00:c9:44:44:30, NASMany_654321
Alias: 10:00:00:00:c9:44:44:31, NASMany_654321
], [stderr])

AT_CLEANUP()



dnl Alias4Parser.java:public class Alias4Parser extends ZoneParser
dnl BNAZoneParser.java:public class BNAZoneParser
dnl DeviceAliasParser.java:public class DeviceAliasParser

AT_SETUP(alishow Regression First WWPN Missed)

AT_DATA([multiWWPN.zoneshow], [Defined configuration:
 cfg:   SAN_CFG_A
 cfg:   SAN_CFG_B
 alias: NASMany_654321
                10:00:00:00:c9:44:44:10; 10:00:00:00:c9:44:44:11
                10:00:00:00:c9:44:44:20; 10:00:00:00:c9:44:44:21
                10:00:00:00:c9:44:44:30; 10:00:00:00:c9:44:44:31
])

AT_CHECK([java -Ddebug.verboseAppendZone=AliShowZoneParser -Ddebug.verboseAddZone=AliShowZoneParser -Ddebug.dumpAliases=AliShowZoneParser -cp $abs_top_builddir/java/fcparsers.jar org.smallfoot.parser.zone.AliShowZoneParser < multiWWPN.zoneshow ], 0, [append: list.sval: 10:00:00:00:c9:44:44:10
append: list.obj: NULL
append: item.sval: 10:00:00:00:c9:44:44:11
append: item.obj: NULL
append: list.sval: NULL
append: list.obj: java.util.Vector
append: item.sval: 10:00:00:00:c9:44:44:20
append: item.obj: NULL
append: list.sval: NULL
append: list.obj: java.util.Vector
append: item.sval: 10:00:00:00:c9:44:44:21
append: item.obj: NULL
append: list.sval: NULL
append: list.obj: java.util.Vector
append: item.sval: 10:00:00:00:c9:44:44:30
append: item.obj: NULL
append: list.sval: NULL
append: list.obj: java.util.Vector
append: item.sval: 10:00:00:00:c9:44:44:31
append: item.obj: NULL
Parse results for AliShowZoneParser:
Zones: 0
Aliases: 1 (names with one or more WWPNs)
Aliases: 6 (name/WWPN pairs)
Alias: 10:00:00:00:c9:44:44:10, NASMany_654321
Alias: 10:00:00:00:c9:44:44:11, NASMany_654321
Alias: 10:00:00:00:c9:44:44:20, NASMany_654321
Alias: 10:00:00:00:c9:44:44:21, NASMany_654321
Alias: 10:00:00:00:c9:44:44:30, NASMany_654321
Alias: 10:00:00:00:c9:44:44:31, NASMany_654321
], [])

AT_CLEANUP()



AT_SETUP(Doxygen confirmation of marked-up content)
dnl      -----------------------------------------

AT_CHECK([if test @DOXYGEN@ = missing ; then exit 77; fi])
AT_CHECK([make -C $abs_srcdir/.. doc], 0, [ignore],[stderr])
dnl used to put the errors at the bottom of the output
AT_CHECK([cat stderr], 0, [],[])

AT_CLEANUP()


